--[[
    Script: XL3RL (Versión Final)
    Descripción: Un GUI con No-Clip, múltiples ejecutores de scripts y función de minimizar/reabrir.
]]

-- Obtener el jugador local
local player = game:GetService("Players").LocalPlayer

-- Crear la GUI principal en la pantalla del jugador
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "XL3RL"
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

-- Frame principal que sirve como ventana (lo hice más alto para los 4 botones)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 250)
MainFrame.Position = UDim2.new(0.5, -150, 0.2, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- Barra superior (roja)
local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 30)
TopBar.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

-- Texto del título "XL3RL"
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "XL3RL"
Title.Font = Enum.Font.SourceSansBold
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 20
Title.Parent = TopBar

-- [[ BOTÓN MINIMIZAR Y BOLA PARA REABRIR ]] --
-- Botón minimizar (-)
local MinButton = Instance.new("TextButton")
MinButton.Size = UDim2.new(0, 30, 1, 0)
MinButton.Position = UDim2.new(1, -60, 0, 0) -- A la izquierda del botón de cerrar
MinButton.Text = "-"
MinButton.Font = Enum.Font.SourceSansBold
MinButton.TextSize = 24
MinButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
MinButton.TextColor3 = Color3.new(1, 1, 1)
MinButton.Parent = TopBar

-- Botón para cerrar la GUI (X)
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.Text = "X"
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 20
CloseButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.Parent = TopBar

-- La "bolita flotante" para reabrir (un engranaje)
local OpenButton = Instance.new("ImageButton")
OpenButton.Size = UDim2.new(0, 50, 0, 50)
OpenButton.Position = UDim2.new(0, 15, 1, -65) -- Abajo a la izquierda
OpenButton.Image = "rbxassetid://3926305904" -- Icono de engranaje de Roblox
OpenButton.BackgroundTransparency = 1
OpenButton.Visible = false -- Inicialmente oculto
OpenButton.Parent = ScreenGui

-- [[ BOTONES DE FUNCIONES ]] --
-- 1. BOTÓN NO-CLIP
local NoClipButton = Instance.new("TextButton")
NoClipButton.Size = UDim2.new(0, 280, 0, 40)
NoClipButton.Position = UDim2.new(0.5, -140, 0, 40)
NoClipButton.Text = "No-Clip: OFF"
NoClipButton.Parent = MainFrame
-- (Estilos comunes para todos los botones de funciones)
for _, btn in {NoClipButton} do
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 18
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.TextColor3 = Color3.new(1, 1, 1)
end

-- 2. BOTÓN SCRIPT SALTO INFINITO-CHILLI
local ChilliScriptButton = Instance.new("TextButton")
ChilliScriptButton.Size = UDim2.new(0, 280, 0, 40)
ChilliScriptButton.Position = UDim2.new(0.5, -140, 0, 90)
ChilliScriptButton.Text = "SCRIPT SALTO INIFITO-CHILLI"
ChilliScriptButton.Parent = MainFrame

-- 3. BOTÓN SCRIPT-SERVIDORES
local ServidoresScriptButton = Instance.new("TextButton")
ServidoresScriptButton.Size = UDim2.new(0, 280, 0, 40)
ServidoresScriptButton.Position = UDim2.new(0.5, -140, 0, 140)
ServidoresScriptButton.Text = "SCRIPT-SERVIDORES"
ServidoresScriptButton.Parent = MainFrame

-- 4. BOTÓN AUTO BASE
local AutoBaseButton = Instance.new("TextButton")
AutoBaseButton.Size = UDim2.new(0, 280, 0, 40)
AutoBaseButton.Position = UDim2.new(0.5, -140, 0, 190)
AutoBaseButton.Text = "AUTO BASE"
AutoBaseButton.Parent = MainFrame

-- (Aplicar estilos comunes a los botones de scripts)
for _, btn in {ChilliScriptButton, ServidoresScriptButton, AutoBaseButton} do
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 18
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.TextColor3 = Color3.new(1, 1, 1)
end

-- Variables y servicios
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local noClipEnabled = false
local noClipConnection = nil

-- Función para que la ventana se pueda arrastrar
local dragging = false
local dragStart
local startPos
TopBar.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true; dragStart = input.Position; startPos = MainFrame.Position end end)
TopBar.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false end end)
UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then local delta = input.Position - dragStart; MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y) end end)

-- [[ LÓGICA DE LOS BOTONES ]] --
-- Lógica Minimizar y Reabrir
MinButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    OpenButton.Visible = true
end)
OpenButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = true
    OpenButton.Visible = false
end)

-- Lógica para cerrar
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- 1. Lógica NO-CLIP
NoClipButton.MouseButton1Click:Connect(function()
    noClipEnabled = not noClipEnabled
    NoClipButton.Text = noClipEnabled and "No-Clip: ON" or "No-Clip: OFF"
    NoClipButton.BackgroundColor3 = noClipEnabled and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(60, 60, 60)
    if noClipEnabled then noClipConnection = RunService.Stepped:Connect(function() local char = player.Character; if char then for _, part in ipairs(char:GetDescendants()) do if part:IsA("BasePart") and part.CanCollide then part.CanCollide = false end end end end) else if noClipConnection then noClipConnection:Disconnect(); noClipConnection = nil end end
end)

-- Función reutilizable para ejecutar scripts
local function executeScript(button, url)
    button.Text = "Cargando..."
    button.BackgroundColor3 = Color3.fromRGB(200, 150, 0)
    local success, result = pcall(function() loadstring(game:HttpGet(url))() end)
    if success then
        button.Text = "Script Ejecutado!"
        button.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    else
        button.Text = "Error al Cargar"
        button.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
        warn("Error ejecutando script: " .. tostring(result))
    end
end

-- 2. Lógica SCRIPT SALTO INFINITO-CHILLI
ChilliScriptButton.MouseButton1Click:Connect(function()
    executeScript(ChilliScriptButton, "https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua")
end)

-- 3. Lógica SCRIPT-SERVIDORES
ServidoresScriptButton.MouseButton1Click:Connect(function()
    executeScript(ServidoresScriptButton, "https://api.luarmor.net/files/v3/loaders/f927290098f4333a9d217cbecbe6e988.lua")
end)

-- 4. Lógica AUTO BASE
AutoBaseButton.MouseButton1Click:Connect(function()
    executeScript(AutoBaseButton, "https://gist.githubusercontent.com/UCT-hub/5b11d10386f1b8ce08feb803861e0b79/raw/b2917b398d4b0cc80fb2aca73a3137ba494ebcf0/gistfile1.txt")
end)
TopBar.Size = UDim2.new(1, 0, 0, 30)
TopBar.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
TopBar.BorderSizePixel = 0
TopBar.Parent = MainFrame

-- Texto del título "Tigro's Hub"
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 1, 0)
Title.BackgroundTransparency = 1
Title.Text = "Tigro's Hub"
Title.Font = Enum.Font.SourceSansBold
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 20
Title.Parent = TopBar

-- Botón para cerrar la GUI
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.Text = "X"
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 20
CloseButton.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.Parent = TopBar

-- [[ BOTÓN NO-CLIP ]] --
local NoClipButton = Instance.new("TextButton")
NoClipButton.Size = UDim2.new(0, 280, 0, 40)
NoClipButton.Position = UDim2.new(0.5, -140, 0, 40) -- Posición del primer botón
NoClipButton.Text = "No-Clip: OFF"
NoClipButton.Font = Enum.Font.SourceSans
NoClipButton.TextSize = 18
NoClipButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
NoClipButton.TextColor3 = Color3.new(1, 1, 1)
NoClipButton.Parent = MainFrame

-- [[ BOTÓN EJECUTAR SCRIPT EXTERNO ]] --
local ExternalScriptButton = Instance.new("TextButton")
ExternalScriptButton.Size = UDim2.new(0, 280, 0, 40)
ExternalScriptButton.Position = UDim2.new(0.5, -140, 0, 90) -- Posición del segundo botón
ExternalScriptButton.Text = "Ejecutar Script Externo"
ExternalScriptButton.Font = Enum.Font.SourceSans
ExternalScriptButton.TextSize = 18
ExternalScriptButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
ExternalScriptButton.TextColor3 = Color3.new(1, 1, 1)
ExternalScriptButton.Parent = MainFrame

-- Variables y servicios
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Variables de control para las funciones
local noClipEnabled = false
local noClipConnection = nil -- Variable para la conexión del No-Clip

-- Función para que la ventana se pueda arrastrar
local dragging = false
local dragStart
local startPos
TopBar.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true; dragStart = input.Position; startPos = MainFrame.Position end end)
TopBar.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false end end)
UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then local delta = input.Position - dragStart; MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y) end end)

-- [[ LÓGICA DEL BOTÓN NO-CLIP ]] --
NoClipButton.MouseButton1Click:Connect(function()
    noClipEnabled = not noClipEnabled
    NoClipButton.Text = noClipEnabled and "No-Clip: ON" or "No-Clip: OFF"
    NoClipButton.BackgroundColor3 = noClipEnabled and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(60, 60, 60)

    if noClipEnabled then
        noClipConnection = RunService.Stepped:Connect(function()
            local char = player.Character
            if char then
                for _, part in ipairs(char:GetDescendants()) do
                    if part:IsA("BasePart") and part.CanCollide then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noClipConnection then
            noClipConnection:Disconnect()
            noClipConnection = nil
        end
    end
end)

-- [[ LÓGICA DEL BOTÓN EJECUTAR SCRIPT EXTERNO ]] --
ExternalScriptButton.MouseButton1Click:Connect(function()
    -- !!! IMPORTANTE: REEMPLAZA ESTA URL CON EL ENLACE RAW DEL SCRIPT QUE QUIERES EJECUTAR !!!
    local scriptUrl = "https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"

    ExternalScriptButton.Text = "Cargando..."
    ExternalScriptButton.BackgroundColor3 = Color3.fromRGB(200, 150, 0)

    local success, result = pcall(function()
        loadstring(game:HttpGet(scriptUrl))()
    end)

    if success then
        ExternalScriptButton.Text = "Script Ejecutado!"
        ExternalScriptButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    else
        ExternalScriptButton.Text = "Error al Cargar"
        ExternalScriptButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
        warn("Error al ejecutar el script externo: " .. tostring(result))
    end
end)

-- Lógica del Botón para cerrar
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)
